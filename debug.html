<!doctype html>
<html lang="en" class="h-100" data-bs-theme="auto">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <!-- Google Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != 'dataLayer' ? '&l=' + l : '';
        j.async = true;
        j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, 'script', 'dataLayer', 'UA-33600926-1');
    </script>
    <!-- End Google Tag Manager -->
    <title>sf2.js test</title>
  </head>

  <body class="d-flex flex-column h-100">
    <header>
      <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <div class="container-fluid d-flex justify-content-between">
          <a class="navbar-brand" href="https://logue.dev/smfplayer.js/">
            smfplayer.js
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarCollapse"
            aria-controls="navbarCollapse"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse flex-grow-0" id="navbarCollapse">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="../">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="./">sf2.js debug test</a>
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="https://github.com/logue/smfplayer.js/"
                >
                  <em class="bi bi-github"></em>
                </a>
              </li>
            </ul>
            <ul class="navbar-nav">
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDarkDropdownMenuLink"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  See Also
                </a>
                <ul
                  class="dropdown-menu dropdown-menu-end"
                  aria-labelledby="navbarDarkDropdownMenuLink"
                >
                  <li>
                    <a
                      class="dropdown-item"
                      href="https://github.com/logue/smfplayer.js/"
                    >
                      smfplayer.js
                    </a>
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="https://github.com/logue/sf2synth.js/"
                    >
                      sf2synth.js
                    </a>
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="https://github.com/logue/Reverb.js/"
                    >
                      Reverb.js
                    </a>
                  </li>
                  <li>
                    <a
                      class="dropdown-item"
                      href="https://github.com/logue/MabiMmlEmu/"
                    >
                      MabiMmlEmu
                    </a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main role="main" class="flex-shrink-0 mt-5">
      <div class="container">
        <h1 id="sftitle"></h1>
        <button class="btn btn-secondary" id="sfback">
          <em class="bi bi-chevron-left"></em>
          Back
        </button>
        <div class="row">
          <div class="col-md">
            <table
              class="table table-striped table-hover table-sm"
              id="sftable"
            ></table>
          </div>
          <div id="sfwave" class="col-md">
            <figure class="figure">
              <figcaption class="figure-caption">Wave</figcaption>
              <canvas
                id="wave"
                width="600"
                height="200"
                class="figure-img img-fluid rounded bg-dark"
              />
            </figure>
            <figure class="figure">
              <figcaption class="figure-caption">Loop</figcaption>
              <canvas
                id="waveloop"
                width="600"
                height="200"
                class="figure-img img-fluid rounded bg-dark"
              />
            </figure>
          </div>
        </div>
      </div>
    </main>

    <footer class="footer mt-auto py-3 bg-body-tertiary">
      <address class="container mb-0">
        <a href="https://github.com/yoya/sf2.js">sf2.js</a>
        by yoya. / Modified by
        <a href="https://logue.dev/">Logue</a>
        .
      </address>
    </footer>

    <script src="assets/sf2.js"></script>
    <script src="assets/debug.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // let url = location.search.substr(1).split('&')[0];
        let url =
          'https://cdn.jsdelivr.net/npm/@logue/sf2synth@latest/dist/Yamaha XG Sound Set.sf2';
        //
        const xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function () {
          if (xhr.readyState > 3) {
            if (xhr.status == 200) {
              var sf = new SoundFont2();
              sf.input(xhr.response);
              viewBanksPresets(sf);
            }
          }
        };
        xhr.open('GET', url);
        xhr.overrideMimeType('text/plain; charset=x-user-defined');
        xhr.responseType = 'arraybuffer';
        xhr.send(null);
      });
    </script>
  </body>
</html>
