/** @license sf2synth.js 2013 - imaya / GREE Inc. [ https://github.com/gree/sf2synth.js ] The MIT License */(function() {'use strict';var l,p=this;function t(c,d){var a=c.split("."),b=p;a[0]in b||!b.execScript||b.execScript("var "+a[0]);for(var f;a.length&&(f=a.shift());)a.length||void 0===d?b=b[f]?b[f]:b[f]={}:b[f]=d};function v(c,d,a){this.a=c;this.destination=d;this.b=a;this.key=a.key;this.Sa=a.velocity;this.buffer=a.sample;this.playbackRate=a.basePlaybackRate;this.sampleRate=a.sampleRate;this.volume=a.volume;this.ka=a.panpot;this.m=a.pitchBend;this.n=a.pitchBendSensitivity;this.Ba=a.modEnvToPitch;this.h=a.expression;this.startTime=c.currentTime;this.M=this.playbackRate;this.ja=!1}l=v.prototype;
l.noteOn=function(){var c=this.a,d=this.b,a=this.buffer,b,f,e,g=this.a.currentTime,h=g+d.volDelay,q=g+d.modDelay,k=h+d.volAttack+d.volHold,m=h+d.modAttack+d.modHold,n=k+d.volDecay,r=m+d.modDecay;f=d.loopStart/this.sampleRate;e=d.loopEnd/this.sampleRate;var s=d.start/this.sampleRate,u,a=a.subarray(0,a.length+d.end);b=this.ra=c.createBuffer(1,a.length,this.sampleRate);b.getChannelData(0).set(a);a=this.W=c.createBufferSource();a.buffer=b;a.loop=1===(d.sampleModes&1);a.loopStart=f;a.loopEnd=e;A(this,
this.m);b=c.createPanner();f=this.N=c.createGainNode();e=f.gain;this.u=c.createGainNode();this.u.gain.value=this.h/127;c=this.filter=c.createBiquadFilter();c.type=c.LOWPASS;b.panningModel=0;b.setPosition(Math.sin(this.ka*Math.PI/2),0,Math.cos(this.ka*Math.PI/2));u=this.Sa/127*this.volume*(1-d.initialAttenuation/1E3);0>u&&(u=0);e.setValueAtTime(0,g);e.setValueAtTime(0,h);e.setTargetValueAtTime(u,h,d.volAttack);e.setValueAtTime(u,k);e.linearRampToValueAtTime(u*(1-d.volSustain),n);c.Q.setValueAtTime(d.initialFilterQ*
Math.pow(10,200),g);h=B(d.initialFilterFc);k=B(d.initialFilterFc+d.modEnvToFilterFc);n=h+(k-h)*(1-d.modSustain);c.frequency.setValueAtTime(h,g);c.frequency.setValueAtTime(h,q);c.frequency.setTargetValueAtTime(k,q,d.modAttack);c.frequency.setValueAtTime(k,m);c.frequency.linearRampToValueAtTime(n,r);a.connect(c);c.connect(b);b.connect(this.u);this.u.connect(f);d.mute||this.connect();a.start(0,s)};function B(c){return 440*Math.pow(2,(c-6900)/1200)}l.noteOff=function(){this.ja=!0};
l.release=function(){var c=this.b,d=this.W,a=this.N,b=this.a.currentTime,f=c.releaseTime-64,f=b+c.volRelease*a.gain.value*(1+f/(0>f?64:63)),e=this.filter,g=B(c.initialFilterFc),h=B(c.initialFilterFc+c.modEnvToFilterFc),h=b+c.modRelease*(g===h?1:(e.frequency.value-g)/(h-g));if(this.ra)switch(c.sampleModes){case 1:a.gain.cancelScheduledValues(0);a.gain.setValueAtTime(a.gain.value,b);a.gain.linearRampToValueAtTime(0,f);e.frequency.cancelScheduledValues(0);e.frequency.setValueAtTime(e.frequency.value,
b);e.frequency.linearRampToValueAtTime(g,h);d.playbackRate.cancelScheduledValues(0);d.playbackRate.setValueAtTime(d.playbackRate.value,b);d.playbackRate.linearRampToValueAtTime(this.M,h);d.stop(f);break;case 2:p.console.log("detect unused sampleModes");break;case 3:d.loop=!1}};l.connect=function(){this.N.connect(this.destination)};l.disconnect=function(){this.N.disconnect(0)};
function A(c,d){c.M=c.playbackRate*Math.pow(Math.pow(2,1/12),d/(0>d?8192:8191)*c.n*c.b.scaleTuning);var a=c.W.playbackRate,b=c.M,f=c.startTime,e=c.b,g=f+e.modAttack,h=g+e.modDecay,q=b*Math.pow(Math.pow(2,1/12),c.Ba*c.b.scaleTuning);a.cancelScheduledValues(0);a.setValueAtTime(b,f);a.linearRampToValueAtTime(q,g);a.linearRampToValueAtTime(b+(q-b)*(1-e.modSustain),h)};function C(c,d){d=d||{};this.input=c;this.j=d.index||0;this.length=d.length||c.length-this.j;this.offset=this.j;this.padding=void 0!==d.padding?d.padding:!0;this.ta=void 0!==d.bigEndian?d.bigEndian:!1}function ha(c,d,a){this.type=c;this.size=d;this.offset=a}
C.prototype.parse=function(){var c=this.length+this.offset;for(this.e=[];this.j<c;){var d=this.input,a=this.j,b=void 0;this.e.push(new ha(String.fromCharCode(d[a++],d[a++],d[a++],d[a++]),b=this.ta?(d[a++]<<24|d[a++]<<16|d[a++]<<8|d[a++])>>>0:(d[a++]|d[a++]<<8|d[a++]<<16|d[a++]<<24)>>>0,a));a+=b;this.padding&&1===(a-this.offset&1)&&a++;this.j=a}};function D(c,d){var a=c.e[d];return void 0===a?null:a};function G(c,d){d=d||{};this.input=c;this.Fa=d.parserOption}
G.prototype.parse=function(){var c,d,a=new C(this.input,this.Fa);a.parse();if(1!==a.e.length)throw Error("wrong chunk length");a=D(a,0);if(null===a)throw Error("chunk not found");var b=this.input,f=a.offset,e;if("RIFF"!==a.type)throw Error("invalid chunk type:"+a.type);e=String.fromCharCode(b[f++],b[f++],b[f++],b[f++]);if("sfbk"!==e)throw Error("invalid signature:"+e);a=new C(b,{index:f,length:a.size-4});a.parse();if(3!==a.e.length)throw Error("invalid sfbk structure");b=D(a,0);f=this.input;e=b.offset;
var g;if("LIST"!==b.type)throw Error("invalid chunk type:"+b.type);g=String.fromCharCode(f[e++],f[e++],f[e++],f[e++]);if("INFO"!==g)throw Error("invalid signature:"+g);(new C(f,{index:e,length:b.size-4})).parse();b=D(a,1);f=this.input;e=b.offset;if("LIST"!==b.type)throw Error("invalid chunk type:"+b.type);g=String.fromCharCode(f[e++],f[e++],f[e++],f[e++]);if("sdta"!==g)throw Error("invalid signature:"+g);b=new C(f,{index:e,length:b.size-4});b.parse();if(1!==b.e.length)throw Error("TODO");this.qa=
D(b,0);a=D(a,2);b=this.input;f=a.offset;if("LIST"!==a.type)throw Error("invalid chunk type:"+a.type);e=String.fromCharCode(b[f++],b[f++],b[f++],b[f++]);if("pdta"!==e)throw Error("invalid signature:"+e);a=new C(b,{index:f,length:a.size-4});a.parse();if(9!==a.e.length)throw Error("invalid pdta chunk");b=D(a,0);f=this.input;e=b.offset;g=this.Ia=[];var h=b.offset+b.size;if("phdr"!==b.type)throw Error("invalid chunk type:"+b.type);for(;e<h;)g.push({Ja:String.fromCharCode.apply(null,f.subarray(e,e+=20)),
Ha:f[e++]|f[e++]<<8,q:f[e++]|f[e++]<<8,ma:f[e++]|f[e++]<<8,Ua:(f[e++]|f[e++]<<8|f[e++]<<16|f[e++]<<24)>>>0,Ta:(f[e++]|f[e++]<<8|f[e++]<<16|f[e++]<<24)>>>0,Va:(f[e++]|f[e++]<<8|f[e++]<<16|f[e++]<<24)>>>0});b=D(a,1);f=this.input;e=b.offset;g=this.Ka=[];h=b.offset+b.size;if("pbag"!==b.type)throw Error("invalid chunk type:"+b.type);for(;e<h;)g.push({na:f[e++]|f[e++]<<8,R:f[e++]|f[e++]<<8});b=D(a,2);if("pmod"!==b.type)throw Error("invalid chunk type:"+b.type);this.pa=H(this,b);b=D(a,3);if("pgen"!==b.type)throw Error("invalid chunk type:"+
b.type);this.oa=I(this,b);b=D(a,4);f=this.input;e=b.offset;g=this.b=[];h=b.offset+b.size;if("inst"!==b.type)throw Error("invalid chunk type:"+b.type);for(;e<h;)g.push({xa:String.fromCharCode.apply(null,f.subarray(e,e+=20)),da:f[e++]|f[e++]<<8});b=D(a,5);f=this.input;e=b.offset;g=this.ya=[];h=b.offset+b.size;if("ibag"!==b.type)throw Error("invalid chunk type:"+b.type);for(;e<h;)g.push({ea:f[e++]|f[e++]<<8,wa:f[e++]|f[e++]<<8});b=D(a,6);if("imod"!==b.type)throw Error("invalid chunk type:"+b.type);this.ga=
H(this,b);b=D(a,7);if("igen"!==b.type)throw Error("invalid chunk type:"+b.type);this.fa=I(this,b);h=D(a,8);a=this.input;b=h.offset;f=this.Ma=[];e=this.Na=[];g=h.offset+h.size;var q,k,m,n,r,s,u;if("shdr"!==h.type)throw Error("invalid chunk type:"+h.type);for(;b<g;){h=String.fromCharCode.apply(null,a.subarray(b,b+=20));d=(a[b++]<<0|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;c=(a[b++]<<0|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;q=(a[b++]<<0|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;k=(a[b++]<<0|a[b++]<<8|a[b++]<<16|
a[b++]<<24)>>>0;m=(a[b++]<<0|a[b++]<<8|a[b++]<<16|a[b++]<<24)>>>0;n=a[b++];r=a[b++]<<24>>24;s=a[b++]|a[b++]<<8;u=a[b++]|a[b++]<<8;c=new Int16Array((new Uint8Array(a.subarray(this.qa.offset+2*d,this.qa.offset+2*c))).buffer);q-=d;k-=d;if(0<m){var w=m,z=void 0,y=void 0,F=void 0,E=void 0;for(d=1;22050>w;){z=new Int16Array(2*c.length);y=E=0;for(F=c.length;y<F;++y)z[E++]=c[y],z[E++]=c[y];c=z;d*=2;w*=2}m*=d;q*=d;k*=d}f.push(c);e.push({Xa:h,Qa:q,ua:k,sampleRate:m,Ea:n,Ga:r,Wa:s,Ya:u})}this.input=null};
function H(c,d){for(var a=c.input,b=d.offset,f=d.offset+d.size,e,g,h=[];b<f;){b+=2;e=a[b++]|a[b++]<<8;g=J[e];if(void 0===g)h.push({type:g,value:{code:e,d:a[b]|a[b+1]<<8<<16>>16,k:a[b++],i:a[b++]}});else switch(g){case "keyRange":case "velRange":case "keynum":case "velocity":h.push({type:g,value:{k:a[b++],i:a[b++]}});break;default:h.push({type:g,value:{d:a[b++]|a[b++]<<8<<16>>16}})}b+=2;b+=2}return h}
function I(c,d){for(var a=c.input,b=d.offset,f=d.offset+d.size,e,g,h=[];b<f;)if(e=a[b++]|a[b++]<<8,g=J[e],void 0===g)h.push({type:g,value:{code:e,d:a[b]|a[b+1]<<8<<16>>16,k:a[b++],i:a[b++]}});else switch(g){case "keynum":case "keyRange":case "velRange":case "velocity":h.push({type:g,value:{k:a[b++],i:a[b++]}});break;default:h.push({type:g,value:{d:a[b++]|a[b++]<<8<<16>>16}})}return h}
function K(c,d,a){var b=[],f={Ra:[],keyRange:{i:127,k:0}},e;for(e=c;e<d;++e)c=a[e],b.push(c),"unknown"===c.type?f.Ra.push(c.value):f[c.type]=c.value;return{w:f,A:b}}
var J=["startAddrsOffset","endAddrsOffset","startloopAddrsOffset","endloopAddrsOffset","startAddrsCoarseOffset","modLfoToPitch","vibLfoToPitch","modEnvToPitch","initialFilterFc","initialFilterQ","modLfoToFilterFc","modEnvToFilterFc","endAddrsCoarseOffset","modLfoToVolume",,"chorusEffectsSend","reverbEffectsSend","pan",,,,"delayModLFO","freqModLFO","delayVibLFO","freqVibLFO","delayModEnv","attackModEnv","holdModEnv","decayModEnv","sustainModEnv","releaseModEnv","keynumToModEnvHold","keynumToModEnvDecay",
"delayVolEnv","attackVolEnv","holdVolEnv","decayVolEnv","sustainVolEnv","releaseVolEnv","keynumToVolEnvHold","keynumToVolEnvDecay","instrument",,"keyRange","velRange","startloopAddrsCoarseOffset","keynum","velocity","initialAttenuation",,"endloopAddrsCoarseOffset","coarseTune","fineTune","sampleID","sampleModes",,"scaleTuning","exclusiveClass","overridingRootKey"];function L(c){var d;this.input=c;this.q=0;this.bufferSize=1024;this.a=M();this.f=this.a.createGainNode();this.G=this.a.createBufferSource();this.t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.aa=[127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127];this.Y=[64,64,64,64,64,64,64,64,64,64,64,64,64,64,64,64];this.Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.L=[2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2];this.J=[127,127,127,127,127,127,127,127,127,127,127,127,127,127,127,127];this.$=[64,64,64,64,64,64,64,64,64,
64,64,64,64,64,64,64];this.K=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];this.I=[0,0,0,0,0,0,0,0,0,128,0,0,0,0,0,0];this.s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.P=this.O=!1;this.X=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];this.c=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]];this.sa=1/65535;this.l=Array(128);c=0;for(d=this.l.length;c<d;++c)this.l[c]=127;this.za=ia;this.S=!0;this.p=this.a.createConvolver();this.o=this.a.createGainNode()}
function M(){var c;if(void 0!==p.AudioContext)c=new p.AudioContext;else if(void 0!==p.webkitAudioContext)c=new p.webkitAudioContext;else if(void 0!==p.mozAudioContext)c=new p.mozAudioContext;else throw Error("Web Audio not supported");void 0===c.createGainNode&&(c.createGainNode=c.createGain);return c}
var ja="Acoustic Piano;Bright Acoustic Piano;Electric Grand Piano;Honky-tonk Piano;Electric Piano;Electric Piano 2;Harpsichord;Clavi;Celesta;Glockenspiel;Musical box;Vibraphone;Marimba;Xylophone;Tubular Bell;Dulcimer;Drawbar Organ;Percussive Organ;Rock Organ;Church organ;Reed organ;Accordion;Harmonica;Tango Accordion;Acoustic Guitar (nylon);Acoustic Guitar (steel);Electric Guitar (jazz);Electric Guitar (clean);Electric Guitar (muted);Overdriven Guitar;Distortion Guitar;Guitar Harmonics;Acoustic Bass;Electric Bass (finger);Electric Bass (pick);Fretless Bass;Slap Bass 1;Slap Bass 2;Synth Bass 1;Synth Bass 2;Violin;Viola;Cello;Double bass;Tremolo Strings;Pizzicato Strings;Orchestral Harp;Timpani;String Ensemble 1;String Ensemble 2;Synth Strings 1;Synth Strings 2;Voice Aahs;Voice Oohs;Synth Voice;Orchestra Hit;Trumpet;Trombone;Tuba;Muted Trumpet;French horn;Brass Section;Synth Brass 1;Synth Brass 2;Soprano Sax;Alto Sax;Tenor Sax;Baritone Sax;Oboe;English Horn;Bassoon;Clarinet;Piccolo;Flute;Recorder;Pan Flute;Blown Bottle;Shakuhachi;Whistle;Ocarina;Lead 1 (square);Lead 2 (sawtooth);Lead 3 (calliope);Lead 4 (chiff);Lead 5 (charang);Lead 6 (voice);Lead 7 (fifths);Lead 8 (bass + lead);Pad 1 (new age);Pad 2 (warm);Pad 3 (polysynth);Pad 4 (choir);Pad 5 (bowed);Pad 6 (metallic);Pad 7 (halo);Pad 8 (sweep);FX 1 (rain);FX 2 (soundtrack);FX 3 (crystal);FX 4 (atmosphere);FX 5 (brightness);FX 6 (goblins);FX 7 (echoes);FX 8 (sci-fi);Sitar;Banjo;Shamisen;Koto;Kalimba;Bagpipe;Fiddle;Shanai;Tinkle Bell;Agogo;Steel Drums;Woodblock;Taiko Drum;Melodic Tom;Synth Drum;Reverse Cymbal;Guitar Fret Noise;Breath Noise;Seashore;Bird Tweet;Telephone Ring;Helicopter;Applause;Gunshot".split(";"),ka=
"Standard Set;;;;;;;;Room Set;;;;;;;;Power Set;;;;;;;;Electronic Set;Analog Set;;;;;;;Jazz Set;;;;;;;;Brush Set;;;;;;;;Orchestra Set;;;;;;;;SFX Set;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;".split(";");function P(c){var d;c.la=new G(c.input);c.r=Q(c);c.p.buffer=c.za;c.o.gain.value=1;c.P=!1;c.O=!1;for(d=0;16>d;++d)R(c,d,0),S(c,d,100),T(c,d,64),c.m(d,0,64),c.n(d,2),c.K[d]=!1,c.J[d]=127,c.I[d]=9===d?128:0,c.s[d]=0;for(d=0;128>d;++d)c.l[d]=127}
function Q(c){var d,a,b,f,e;c=c.la;c.parse();var g=c.Ia,h=c.Ka,q=[],k,m,n,r,s;r=0;for(s=g.length;r<s;++r){k=g[r].ma;m=g[r+1]?g[r+1].ma:h.length;for(n=[];k<m;++k)e=K(h[k].na,h[k+1]?h[k+1].na:c.oa.length,c.oa),b=e.w,d=e.A,f=K(h[k].R,h[k+1]?h[k+1].R:c.pa.length,c.pa),e=f.w,f=f.A,n.push({ca:b,va:d,Ca:e,Da:f}),b=void 0!==b.instrument?b.instrument.d:void 0!==e.instrument?e.instrument.d:null;q.push({name:g[r].Ja,info:n,v:g[r],b:b})}h=c.b;n=c.ya;g=[];s=0;for(k=h.length;s<k;++s){m=h[s].da;b=h[s+1]?h[s+1].da:
n.length;r=[];for(e=b;m<e;++m)d=K(n[m].ea,n[m+1]?n[m+1].ea:c.fa.length,c.fa),b=d.w,f=d.A,a=K(n[m].R,n[m+1]?n[m+1].wa:c.ga.length,c.ga),d=a.w,a=a.A,r.push({ca:b,va:f,Ca:d,Da:a});g.push({name:h[s].xa,info:r})}h=[];k=0;for(m=q.length;k<m;++k)if(b=q[k],s=b.v.Ha,"number"===typeof b.b&&(r=g[b.b],"EOI"!==r.name.replace(/\0*$/,"")))for(void 0===h[b.v.q]&&(h[b.v.q]=[]),n=h[b.v.q],n[s]=[],n[s].name=b.name,b=0,e=r.info.length;b<e;++b){d=c;f=n[s];a=r.info[b].ca;var u=void 0,w=void 0,z=void 0,y=void 0,F=void 0,
E=void 0,Y=void 0,Z=void 0,$=void 0,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,N=void 0,O=void 0,x=void 0,ga=void 0;if(void 0!==a.keyRange&&void 0!==a.sampleID)for(z=U(a,"delayVolEnv",-12E3),y=U(a,"attackVolEnv",-12E3),F=U(a,"holdVolEnv",-12E3),E=U(a,"decayVolEnv",-12E3),Y=U(a,"sustainVolEnv"),Z=U(a,"releaseVolEnv",-12E3),$=U(a,"delayModEnv",-12E3),aa=U(a,"attackModEnv",-12E3),ba=U(a,"holdModEnv",-12E3),ca=U(a,"decayModEnv",-12E3),da=U(a,"sustainModEnv"),ea=U(a,"releaseModEnv",-12E3),
fa=U(a,"coarseTune")+U(a,"fineTune")/100,N=U(a,"scaleTuning",100)/100,O=U(a,"freqVibLFO"),x=a.keyRange.k,ga=a.keyRange.i;x<=ga;++x)f[x]||(u=U(a,"sampleID"),w=d.Na[u],f[x]={sample:d.Ma[u],sampleRate:w.sampleRate,sampleModes:U(a,"sampleModes"),basePlaybackRate:Math.pow(Math.pow(2,1/12),(x-U(a,"overridingRootKey",w.Ea)+fa+w.Ga/100)*N),modEnvToPitch:U(a,"modEnvToPitch")/100,scaleTuning:N,start:32768*U(a,"startAddrsCoarseOffset")+U(a,"startAddrsOffset"),end:32768*U(a,"endAddrsCoarseOffset")+U(a,"endAddrsOffset"),
loopStart:w.Qa+32768*U(a,"startloopAddrsCoarseOffset")+U(a,"startloopAddrsOffset"),loopEnd:w.ua+32768*U(a,"endloopAddrsCoarseOffset")+U(a,"endloopAddrsOffset"),volDelay:Math.pow(2,z/1200),volAttack:Math.pow(2,y/1200),volHold:Math.pow(2,F/1200)*Math.pow(2,(60-x)*U(a,"keynumToVolEnvHold")/1200),volDecay:Math.pow(2,E/1200)*Math.pow(2,(60-x)*U(a,"keynumToVolEnvDecay")/1200),volSustain:Y/1E3,volRelease:Math.pow(2,Z/1200),modDelay:Math.pow(2,$/1200),modAttack:Math.pow(2,aa/1200),modHold:Math.pow(2,ba/1200)*
Math.pow(2,(60-x)*U(a,"keynumToModEnvHold")/1200),modDecay:Math.pow(2,ca/1200)*Math.pow(2,(60-x)*U(a,"keynumToModEnvDecay")/1200),modSustain:da/1E3,modRelease:Math.pow(2,ea/1200),initialFilterFc:U(a,"initialFilterFc",13500),modEnvToFilterFc:U(a,"modEnvToFilterFc"),initialFilterQ:U(a,"initialFilterQ"),reverbEffectSend:U(a,"reverbEffectSend"),initialAttenuation:U(a,"initialAttenuation"),freqVibLFO:O?8.176*Math.pow(2,O/1200):void 0})}return h}
function U(c,d,a){void 0===a&&(a=0);return c[d]?c[d].d:a}
var ia=M().createBuffer(function(c){var d,a=c.length,b=new Uint8Array(a);for(d=0;d<a;++d)b[d]=c.charCodeAt(d);return b}(window.atob("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")).buffer,!1);
L.prototype.connect=function(){this.G.connect(this.f);this.f.connect(this.a.destination);this.S&&la(this)};function la(c){c.f.connect(c.p);c.p.connect(c.o);c.o.connect(c.a.destination)}L.prototype.start=function(){this.connect();this.G.start(0);V(this,16383)};function V(c,d){c.f.gain.value=d/16384*c.sa}L.prototype.stop=L.prototype.disconnect=function(){this.G.disconnect(0);this.f.disconnect(0);this.p.disconnect(0);this.o.disconnect(0)};
L.prototype.T=function(c){this.S!==c&&(this.p.disconnect(0),this.o.disconnect(0),(this.S=c)&&la(this))};var W="Instrument;Vol;Pan;Bend;Range;GM Mode".split(";");
function ma(c){var d=c.table=document.createElement("table"),a=document.createElement("thead"),b=document.createElement("tbody"),f,e,g,h,q,k;a.appendChild(na(W,!0));for(k=0;16>k;++k){f=na(W.length+128,!1);b.appendChild(f);e=f.querySelector("td:nth-child(1)");g=document.createElement("input");g.setAttribute("type","checkbox");g.addEventListener("change",function(a,c){return function(){var b=this.checked,d=a.c[c],e;if(a.X[c]=b)for(b=0,e=d.length;b<e;++b)d[b].disconnect();else for(b=0,e=d.length;b<e;++b)d[b].connect()}}(c,
k),!1);e.appendChild(g);h=document.createElement("select");for(g=0;128>g;++g){var m=9!==k?ja[g]:ka[g];q=document.createElement("option");""!==m&&(q.textContent=m,q.value=g,h.appendChild(q))}e.appendChild(h);h.addEventListener("change",function(a,b){return function(c){R(a,b,c.target.value)}}(c,k),!1);h.selectedIndex=c.t[k];f=f.querySelectorAll("td:nth-last-child(-n+128)");for(g=0;128>g;++g)f[g].addEventListener("mousedown",function(a,b,c){return function(d){d.preventDefault();a.ba=!0;a.noteOn(b,c,
127)}}(c,k,g)),f[g].addEventListener("mouseover",function(a,b,c){return function(d){d.preventDefault();a.ba&&a.noteOn(b,c,127)}}(c,k,g)),f[g].addEventListener("mouseout",function(a,b,c){return function(d){d.preventDefault();a.noteOff(b,c,0)}}(c,k,g)),f[g].addEventListener("mouseup",function(a,b,c){return function(d){d.preventDefault();a.ba=!1;a.noteOff(b,c,0)}}(c,k,g))}d.appendChild(a);d.appendChild(b);return d}
function na(c,d){var a=document.createElement("tr"),b,f=c instanceof Array,e,g=f?c.length:c;for(e=0;e<g;++e)b=document.createElement(d?"th":"td"),b.textContent=f&&void 0!==c[e]?c[e]:"",d&&g===e+1&&b.setAttribute("colspan",129),a.appendChild(b);return a}l=L.prototype;
l.noteOn=function(c,d,a){var b=this.I[c],f=128;this.P?(f=127,64===b?b=125:0!==this.s[c]&&0!==b&&126!==b&&127!==b&&(b=this.s[c]),this.table.querySelector("thead > tr:first-child > th:nth-child(6)").innerText="XG Mode"):this.O?this.table.querySelector("thead > tr:first-child > th:nth-child(6)").innerText="GS Mode":(this.table.querySelector("thead > tr:first-child > th:nth-child(6)").innerText="GM Mode",b=0);9==c&&(b=f);var e=void 0!==this.r[b]?this.r[b]:this.r[9===c?f:0],f=e[this.t[c]];if(this.table){var g=
this.table.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child("+(W.length+d)+")");g.classList.add("note-on");g.style.opacity=a/127}f||(f=e[b]);(e=f[d]||e[0])?(b=this.Y[c]-64,e.channel=c,e.key=d,e.velocity=a,e.panpot=b/(0>b?64:63),e.volume=this.aa[c]/127,e.pitchBend=this.Z[c]-8192,e.expression=this.J[c],e.pitchBendSensitivity=this.L[c],e.mute=this.X[c],e.releaseTime=this.$[c],9===c&&(f.volume*=this.l[d]/127),d=new v(this.a,this.f,e),d.noteOn(),this.c[c].push(d)):p.console.warn("instrument not found: bank=%s instrument=%s channel=%s key=%s",
b,this.t[c],c,d)};l.noteOff=function(c,d){var a,b,f=this.c[c],e,g=this.K[c];this.table&&(a=this.table.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child("+(d+W.length)+")"),a.classList.remove("note-on"),a.style.opacity=1);a=0;for(b=f.length;a<b;++a)e=f[a],e.key===d&&(e.noteOff(),g||(e.release(),f.splice(a,1),--a,--b))};function oa(c,d,a){var b=c.c[d];if(!(c.K[d]=!(64>a)))for(d=0,a=b.length;d<a;++d)c=b[d],c.ja&&(c.release(),b.splice(d,1),--d,--a)}
function R(c,d,a){c.table&&(c.table.querySelector("tbody > tr:nth-child("+(d+1)+") > td:first-child > select").value=a);c.t[d]=a}function S(c,d,a){c.table&&(c.table.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child(2)").textContent=a);c.aa[d]=a}l.h=function(c,d){var a,b,f=this.c[c];a=0;for(b=f.length;a<b;++a){var e=f[a];e.u.gain.value=(e.h=d)/127}this.J[c]=d};
function T(c,d,a){c.table&&(c.table.querySelector("tbody > tr:nth-child("+(d+1)+") > td:nth-child(3)").textContent=a);c.Y[d]=a}l.m=function(c,d,a){d=d&127|(a&127)<<7;var b,f=this.c[c],e=d-8192;this.table&&(this.table.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child(4)").textContent=e);a=0;for(b=f.length;a<b;++a)A(f[a],e);this.Z[c]=d};l.n=function(c,d){this.table&&(this.table.querySelector("tbody > tr:nth-child("+(c+1)+") > td:nth-child(5)").textContent=d);this.L[c]=d};function X(){this.V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.F=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.D=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.Aa=this.onmessage.bind(this);this.g=!0;window.addEventListener("DOMContentLoaded",function(){this.La=!0}.bind(this),!1)}l=X.prototype;l.Pa=function(c){this.La?this.load(c):window.addEventListener("DOMContentLoaded",function a(){window.removeEventListener("DOMContentLoaded",a,!1);this.load(c)}.bind(this),!1)};
l.load=function(c){var d;this.H();d=this.C=new XMLHttpRequest;d.open("GET",c,!0);d.responseType="arraybuffer";d.addEventListener("load",function(a){a=a.target;this.onload(a.response);"function"===typeof this.ha&&this.ha(a.response);this.C=null}.bind(this),!1);d.send()};l.T=function(c){this.B.T(c)};l.H=function(){this.C&&(this.C.abort(),this.C=null)};l.onload=function(c){c=new Uint8Array(c);this.ia(c)};
l.ia=function(c){var d;this.H();this.B?(d=this.B,d.input=c,d.la=new G(c),d.r=Q(d)):(d=this.B=new L(c),document.body.appendChild(ma(d)),P(d),d.start(),window.addEventListener("message",this.Aa,!1));window.opener?window.opener.postMessage("link,ready","*"):window.parent!==window&&window.parent.postMessage("link,ready","*")};
l.onmessage=function(c){c=c.data.split(",");switch(c.shift()){case "midi":pa(this,c.map(function(c){return parseInt(c,16)}));break;case "link":c=c.shift();switch(c){case "reqpatch":window.opener?window.opener.postMessage("link,patch","*"):window.parent!==window&&window.parent.postMessage("link,patch","*");break;case "setpatch":break;default:p.console.error("unknown link message:",c)}break;default:p.console.error("unknown message type")}};l.Oa=function(c){this.ha=c};
function pa(c,d){var a=d[0]&15,b=c.B;switch(d[0]&240){case 128:b.noteOff(a,d[1],d[2]);break;case 144:0<d[2]?b.noteOn(a,d[1],d[2]):b.noteOff(a,d[1],0);break;case 176:switch(d[1]){case 0:b.I[a]=d[2];break;case 6:if(c.g)switch(c.F[a]){case 0:switch(c.D[a]){case 0:b.n(a,d[2])}}else switch(c.V[a]){case 26:b.l[c.U[a]]=d[2]}break;case 38:if(c.g)switch(c.F[a]){case 0:switch(c.D[a]){case 0:b.n(a,b.L[a]+d[2]/100)}}break;case 7:S(b,a,d[2]);break;case 10:T(b,a,d[2]);break;case 120:for(var f=b.c[a],e;0<f.length;)e=
f.shift(),b.noteOff(a,e.key,0),e.release(),e.disconnect();break;case 121:b.h(a,127);b.m(a,0,64);oa(b,a,0);break;case 32:b.s[a]=d[2];break;case 98:c.g=!1;c.U[a]=d[2];break;case 99:c.g=!1;c.V[a]=d[2];break;case 100:c.g=!0;c.D[a]=d[2];break;case 101:c.g=!0;c.F[a]=d[2];break;case 64:oa(b,a,d[2]);break;case 11:b.h(a,d[2]);break;case 74:b.$[a]=d[2]}break;case 192:R(b,a,d[1]);break;case 224:b.m(a,d[1],d[2]);break;case 240:switch(d[1]){case 126:127===d[2]&&9===d[3]&&1===d[4]&&P(b);break;case 127:switch(d[3]){case 4:switch(d[4]){case 1:V(b,
d[5]+(d[6]<<7))}}}switch(d[2]){case 67:switch(d[7]){case 4:V(b,d[8]<<7);break;case 126:P(b),b.P=!0}break;case 65:switch(d[8]){case 4:V(b,d[9]<<7);break;case 127:P(b),b.O=!0}}}};t("SoundFont.WebMidiLink",X);t("SoundFont.WebMidiLink.prototype.setup",X.prototype.Pa);t("SoundFont.WebMidiLink.prototype.loadSoundFont",X.prototype.ia);t("SoundFont.WebMidiLink.prototype.cancelLoading",X.prototype.H);t("SoundFont.WebMidiLink.prototype.setLoadCallback",X.prototype.Oa);t("SoundFont.WebMidiLink.prototype.setReverb",X.prototype.T);}).call(this); //@ sourceMappingURL=sf2synth.min.js.map
